'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _getWindow = require('get-window');

var _getWindow2 = _interopRequireDefault(_getWindow);

var _selectionIsBackward = require('selection-is-backward');

var _selectionIsBackward2 = _interopRequireDefault(_selectionIsBackward);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Scroll the current selection's focus point into view if needed.
 *
 * @param {Selection} selection
 */

function scrollToSelection(selection) {
  if (!selection.anchorNode) return;

  var window = (0, _getWindow2.default)(selection.anchorNode);
  var backward = (0, _selectionIsBackward2.default)(selection);
  var range = selection.getRangeAt(0);
  var rect = range.getBoundingClientRect();
  var innerWidth = window.innerWidth,
      innerHeight = window.innerHeight,
      pageYOffset = window.pageYOffset,
      pageXOffset = window.pageXOffset;

  var top = (backward ? rect.top : rect.bottom) + pageYOffset;
  var left = (backward ? rect.left : rect.right) + pageXOffset;

  var x = left < pageXOffset || innerWidth + pageXOffset < left ? left - innerWidth / 2 : pageXOffset;

  var y = top < pageYOffset || innerHeight + pageYOffset < top ? top - innerHeight / 2 : pageYOffset;

  window.scrollTo(x, y);
}

/**
 * Export.
 *
 * @type {Function}
 */

exports.default = scrollToSelection;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlscy9zY3JvbGwtdG8tc2VsZWN0aW9uLmpzIl0sIm5hbWVzIjpbInNjcm9sbFRvU2VsZWN0aW9uIiwic2VsZWN0aW9uIiwiYW5jaG9yTm9kZSIsIndpbmRvdyIsImJhY2t3YXJkIiwicmFuZ2UiLCJnZXRSYW5nZUF0IiwicmVjdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImlubmVyV2lkdGgiLCJpbm5lckhlaWdodCIsInBhZ2VZT2Zmc2V0IiwicGFnZVhPZmZzZXQiLCJ0b3AiLCJib3R0b20iLCJsZWZ0IiwicmlnaHQiLCJ4IiwieSIsInNjcm9sbFRvIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFDQTs7OztBQUNBOzs7Ozs7QUFFQTs7Ozs7O0FBTUEsU0FBU0EsaUJBQVQsQ0FBMkJDLFNBQTNCLEVBQXNDO0FBQ3BDLE1BQUksQ0FBQ0EsVUFBVUMsVUFBZixFQUEyQjs7QUFFM0IsTUFBTUMsU0FBUyx5QkFBVUYsVUFBVUMsVUFBcEIsQ0FBZjtBQUNBLE1BQU1FLFdBQVcsbUNBQVdILFNBQVgsQ0FBakI7QUFDQSxNQUFNSSxRQUFRSixVQUFVSyxVQUFWLENBQXFCLENBQXJCLENBQWQ7QUFDQSxNQUFNQyxPQUFPRixNQUFNRyxxQkFBTixFQUFiO0FBTm9DLE1BTzVCQyxVQVA0QixHQU8wQk4sTUFQMUIsQ0FPNUJNLFVBUDRCO0FBQUEsTUFPaEJDLFdBUGdCLEdBTzBCUCxNQVAxQixDQU9oQk8sV0FQZ0I7QUFBQSxNQU9IQyxXQVBHLEdBTzBCUixNQVAxQixDQU9IUSxXQVBHO0FBQUEsTUFPVUMsV0FQVixHQU8wQlQsTUFQMUIsQ0FPVVMsV0FQVjs7QUFRcEMsTUFBTUMsTUFBTSxDQUFDVCxXQUFXRyxLQUFLTSxHQUFoQixHQUFzQk4sS0FBS08sTUFBNUIsSUFBc0NILFdBQWxEO0FBQ0EsTUFBTUksT0FBTyxDQUFDWCxXQUFXRyxLQUFLUSxJQUFoQixHQUF1QlIsS0FBS1MsS0FBN0IsSUFBc0NKLFdBQW5EOztBQUVBLE1BQU1LLElBQUlGLE9BQU9ILFdBQVAsSUFBc0JILGFBQWFHLFdBQWIsR0FBMkJHLElBQWpELEdBQ05BLE9BQU9OLGFBQWEsQ0FEZCxHQUVORyxXQUZKOztBQUlBLE1BQU1NLElBQUlMLE1BQU1GLFdBQU4sSUFBcUJELGNBQWNDLFdBQWQsR0FBNEJFLEdBQWpELEdBQ05BLE1BQU1ILGNBQWMsQ0FEZCxHQUVOQyxXQUZKOztBQUlBUixTQUFPZ0IsUUFBUCxDQUFnQkYsQ0FBaEIsRUFBbUJDLENBQW5CO0FBQ0Q7O0FBRUQ7Ozs7OztrQkFNZWxCLGlCIiwiZmlsZSI6InNjcm9sbC10by1zZWxlY3Rpb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbmltcG9ydCBnZXRXaW5kb3cgZnJvbSAnZ2V0LXdpbmRvdydcbmltcG9ydCBpc0JhY2t3YXJkIGZyb20gJ3NlbGVjdGlvbi1pcy1iYWNrd2FyZCdcblxuLyoqXG4gKiBTY3JvbGwgdGhlIGN1cnJlbnQgc2VsZWN0aW9uJ3MgZm9jdXMgcG9pbnQgaW50byB2aWV3IGlmIG5lZWRlZC5cbiAqXG4gKiBAcGFyYW0ge1NlbGVjdGlvbn0gc2VsZWN0aW9uXG4gKi9cblxuZnVuY3Rpb24gc2Nyb2xsVG9TZWxlY3Rpb24oc2VsZWN0aW9uKSB7XG4gIGlmICghc2VsZWN0aW9uLmFuY2hvck5vZGUpIHJldHVyblxuXG4gIGNvbnN0IHdpbmRvdyA9IGdldFdpbmRvdyhzZWxlY3Rpb24uYW5jaG9yTm9kZSlcbiAgY29uc3QgYmFja3dhcmQgPSBpc0JhY2t3YXJkKHNlbGVjdGlvbilcbiAgY29uc3QgcmFuZ2UgPSBzZWxlY3Rpb24uZ2V0UmFuZ2VBdCgwKVxuICBjb25zdCByZWN0ID0gcmFuZ2UuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgY29uc3QgeyBpbm5lcldpZHRoLCBpbm5lckhlaWdodCwgcGFnZVlPZmZzZXQsIHBhZ2VYT2Zmc2V0IH0gPSB3aW5kb3dcbiAgY29uc3QgdG9wID0gKGJhY2t3YXJkID8gcmVjdC50b3AgOiByZWN0LmJvdHRvbSkgKyBwYWdlWU9mZnNldFxuICBjb25zdCBsZWZ0ID0gKGJhY2t3YXJkID8gcmVjdC5sZWZ0IDogcmVjdC5yaWdodCkgKyBwYWdlWE9mZnNldFxuXG4gIGNvbnN0IHggPSBsZWZ0IDwgcGFnZVhPZmZzZXQgfHwgaW5uZXJXaWR0aCArIHBhZ2VYT2Zmc2V0IDwgbGVmdFxuICAgID8gbGVmdCAtIGlubmVyV2lkdGggLyAyXG4gICAgOiBwYWdlWE9mZnNldFxuXG4gIGNvbnN0IHkgPSB0b3AgPCBwYWdlWU9mZnNldCB8fCBpbm5lckhlaWdodCArIHBhZ2VZT2Zmc2V0IDwgdG9wXG4gICAgPyB0b3AgLSBpbm5lckhlaWdodCAvIDJcbiAgICA6IHBhZ2VZT2Zmc2V0XG5cbiAgd2luZG93LnNjcm9sbFRvKHgsIHkpXG59XG5cbi8qKlxuICogRXhwb3J0LlxuICpcbiAqIEB0eXBlIHtGdW5jdGlvbn1cbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBzY3JvbGxUb1NlbGVjdGlvblxuIl19